{"version":3,"file":"index.js","sources":["../src/js/work-together.js"],"sourcesContent":["import Swal from 'sweetalert2';\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  const form = document.querySelector('.contact-form');\n  const emailInput = document.querySelector('.contact-input');\n  const messageInput = document.querySelector('.contact-textarea');\n  const submitButton = document.querySelector('.contact-btn');\n  const modal = document.querySelector('.confirmation-modal-overlay');\n  const closeModalButton = document.querySelector('.close-confirmation-btn');\n  const errorMessage = document.querySelector('.message');\n  const iconValid = document.querySelector('.filled-icon');\n\n  const emailPattern = /^\\w+(\\.\\w+)?@[a-zA-Z_]+?\\.[a-zA-Z]{2,3}$/;\n\n  function openModal() {\n    modal.classList.add('is-open');\n  }\n\n  function closeModal() {\n    modal.classList.remove('is-open');\n  }\n\n  if (localStorage.getItem('email')) {\n    emailInput.value = localStorage.getItem('email');\n  }\n  if (localStorage.getItem('message')) {\n    messageInput.value = localStorage.getItem('message');\n  }\n\n  emailInput.addEventListener('input', function () {\n    localStorage.setItem('email', emailInput.value);\n  });\n\n  messageInput.addEventListener('input', function () {\n    localStorage.setItem('message', messageInput.value);\n  });\n\n  emailInput.addEventListener('blur', function () {\n    if (!emailPattern.test(emailInput.value)) {\n      emailInput.classList.remove('valid');\n      emailInput.classList.add('invalid');\n      errorMessage.classList.remove('valid');\n      errorMessage.classList.add('invalid');\n      iconValid.classList.add('invalid');\n    } else {\n      emailInput.classList.add('valid');\n      emailInput.classList.remove('invalid');\n      errorMessage.classList.add('valid');\n      errorMessage.classList.remove('invalid');\n      iconValid.classList.remove('invalid');\n    }\n  });\n\n  form.addEventListener('submit', async function (event) {\n    event.preventDefault();\n\n    if (!emailPattern.test(emailInput.value)) {\n      emailInput.classList.add('invalid');\n      emailInput.classList.remove('valid');\n      return;\n    }\n\n    const formData = new FormData(form);\n    const data = {\n      email: formData.get('email'),\n      comment: formData.get('message'),\n    };\n\n    if (!data.comment || data.comment.trim() === '') {\n      return;\n    }\n\n    try {\n      const response = await fetch(\n        'https://portfolio-js.b.goit.study/api/requests',\n        {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify(data),\n        }\n      );\n\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n\n      const result = await response.json();\n\n      if (result.title) {\n        openModal();\n        form.reset();\n\n        localStorage.removeItem('email');\n        localStorage.removeItem('message');\n\n        iconValid.classList.add('invalid');\n      }\n    } catch (error) {\n      Swal.fire({\n        icon: 'error',\n        title: 'Oops...',\n        text: 'Something went wrong!',\n        confirmButtonColor: '#00b068',\n      });\n    }\n  });\n\n  closeModalButton.addEventListener('click', closeModal);\n  modal.addEventListener('click', function (event) {\n    if (event.target === modal) {\n      closeModal();\n    }\n  });\n\n  document.addEventListener('keydown', function (event) {\n    if (event.key === 'Escape' || event.key === 'Esc') {\n      closeModal();\n    }\n  });\n});\n"],"names":["form","emailInput","messageInput","modal","closeModalButton","errorMessage","iconValid","emailPattern","openModal","closeModal","event","formData","data","response","Swal"],"mappings":"svBAEA,SAAS,iBAAiB,mBAAoB,UAAY,CACxD,MAAMA,EAAO,SAAS,cAAc,eAAe,EAC7CC,EAAa,SAAS,cAAc,gBAAgB,EACpDC,EAAe,SAAS,cAAc,mBAAmB,EAC1C,SAAS,cAAc,cAAc,EAC1D,MAAMC,EAAQ,SAAS,cAAc,6BAA6B,EAC5DC,EAAmB,SAAS,cAAc,yBAAyB,EACnEC,EAAe,SAAS,cAAc,UAAU,EAChDC,EAAY,SAAS,cAAc,cAAc,EAEjDC,EAAe,2CAErB,SAASC,GAAY,CACnBL,EAAM,UAAU,IAAI,SAAS,CAC9B,CAED,SAASM,GAAa,CACpBN,EAAM,UAAU,OAAO,SAAS,CACjC,CAEG,aAAa,QAAQ,OAAO,IAC9BF,EAAW,MAAQ,aAAa,QAAQ,OAAO,GAE7C,aAAa,QAAQ,SAAS,IAChCC,EAAa,MAAQ,aAAa,QAAQ,SAAS,GAGrDD,EAAW,iBAAiB,QAAS,UAAY,CAC/C,aAAa,QAAQ,QAASA,EAAW,KAAK,CAClD,CAAG,EAEDC,EAAa,iBAAiB,QAAS,UAAY,CACjD,aAAa,QAAQ,UAAWA,EAAa,KAAK,CACtD,CAAG,EAEDD,EAAW,iBAAiB,OAAQ,UAAY,CACzCM,EAAa,KAAKN,EAAW,KAAK,GAOrCA,EAAW,UAAU,IAAI,OAAO,EAChCA,EAAW,UAAU,OAAO,SAAS,EACrCI,EAAa,UAAU,IAAI,OAAO,EAClCA,EAAa,UAAU,OAAO,SAAS,EACvCC,EAAU,UAAU,OAAO,SAAS,IAVpCL,EAAW,UAAU,OAAO,OAAO,EACnCA,EAAW,UAAU,IAAI,SAAS,EAClCI,EAAa,UAAU,OAAO,OAAO,EACrCA,EAAa,UAAU,IAAI,SAAS,EACpCC,EAAU,UAAU,IAAI,SAAS,EAQvC,CAAG,EAEDN,EAAK,iBAAiB,SAAU,eAAgBU,EAAO,CAGrD,GAFAA,EAAM,eAAc,EAEhB,CAACH,EAAa,KAAKN,EAAW,KAAK,EAAG,CACxCA,EAAW,UAAU,IAAI,SAAS,EAClCA,EAAW,UAAU,OAAO,OAAO,EACnC,MACD,CAED,MAAMU,EAAW,IAAI,SAASX,CAAI,EAC5BY,EAAO,CACX,MAAOD,EAAS,IAAI,OAAO,EAC3B,QAASA,EAAS,IAAI,SAAS,CACrC,EAEI,GAAI,GAACC,EAAK,SAAWA,EAAK,QAAQ,KAAM,IAAK,IAI7C,GAAI,CACF,MAAMC,EAAW,MAAM,MACrB,iDACA,CACE,OAAQ,OACR,QAAS,CACP,eAAgB,kBACjB,EACD,KAAM,KAAK,UAAUD,CAAI,CAC1B,CACT,EAEM,GAAI,CAACC,EAAS,GACZ,MAAM,IAAI,MAAM,uBAAuBA,EAAS,MAAM,EAAE,GAG3C,MAAMA,EAAS,QAEnB,QACTL,IACAR,EAAK,MAAK,EAEV,aAAa,WAAW,OAAO,EAC/B,aAAa,WAAW,SAAS,EAEjCM,EAAU,UAAU,IAAI,SAAS,EAEpC,MAAe,CACdQ,EAAK,KAAK,CACR,KAAM,QACN,MAAO,UACP,KAAM,wBACN,mBAAoB,SAC5B,CAAO,CACF,CACL,CAAG,EAEDV,EAAiB,iBAAiB,QAASK,CAAU,EACrDN,EAAM,iBAAiB,QAAS,SAAUO,EAAO,CAC3CA,EAAM,SAAWP,GACnBM,GAEN,CAAG,EAED,SAAS,iBAAiB,UAAW,SAAUC,EAAO,EAChDA,EAAM,MAAQ,UAAYA,EAAM,MAAQ,QAC1CD,GAEN,CAAG,CACH,CAAC"}